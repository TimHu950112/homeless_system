{% extends "base.html" %}

{% block title %}我的工作申請 - 無家者服務整合平台{% endblock %}

{% block content %}
<h1 class="mb-4"><i class="bi bi-briefcase"></i> 我的工作申請</h1>

{% if applications %}
<div class="table-responsive">
    <table class="table table-hover">
        <thead class="table-light">
            <tr>
                <th>職缺</th>
                <th>公司</th>
                <th>地點</th>
                <th>薪資</th>
                <th>申請日期</th>
                <th>狀態</th>
                <th>操作</th>
            </tr>
        </thead>
        <tbody>
            {% for application in applications %}
            <tr>
                <td>
                    <strong>{{ application.job.get('title', 'N/A') }}</strong><br>
                    <small class="text-muted">{{ application.job.get('job_type', '') }}</small>
                </td>
                <td>{{ application.job.get('employer', 'N/A') }}</td>
                <td>{{ application.job.get('location', 'N/A') }}</td>
                <td>${{ application.job.get('salary_min', 0) }}-{{ application.job.get('salary_max', 0) }}</td>
                <td>{{ application.get('created_at', '')[:10] if application.get('created_at') else '未知' }}</td>
                <td>
                    {% if application.get('status') == 'pending' %}
                    <span class="badge bg-warning">待審核</span>
                    {% elif application.get('status') == 'accepted' %}
                    <span class="badge bg-success">已錄取</span>
                    {% elif application.get('status') == 'rejected' %}
                    <span class="badge bg-danger">未錄取</span>
                    {% elif application.get('status') == 'interview' %}
                    <span class="badge bg-info">面試邀約</span>
                    {% endif %}
                </td>
                <td>
                    <a href="{{ url_for('employment.job_detail', id=application.job.get('id')) }}" class="btn btn-sm btn-outline-primary">
                        <i class="bi bi-eye"></i> 查看
                    </a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% else %}
<div class="alert alert-info">
    <i class="bi bi-info-circle"></i> 您目前沒有工作申請記錄。
    <a href="{{ url_for('employment.index') }}" class="alert-link">立即瀏覽職缺</a>
</div>
{% endif %}
{% endblock %}
